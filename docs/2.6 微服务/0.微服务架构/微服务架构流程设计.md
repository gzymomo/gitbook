https://blog.51cto.com/14994509/2666651



# 前言

单体架构在中等偏小的业务中比较常见，场景模式就是单个应用、单个数据库。一个程序包（例如war格式或者Jar格式）包含所有业务需求功能，这是一种比较传统的架构风格，小编将从理论-实战，为大家剖析[微服务架构](https://mp.weixin.qq.com/s/sKHy0OJx7pITFJ33QR7XAg)。

# 一、单体架构

1. 复杂性高,整个项目包含的模块多，依赖模糊，修改程序容易触发不可知问题。
2. 扩展能力受限,单体应用只能整体进行扩展，无法针对业务模块的特性进行伸缩。
3. 稳定性差,任何微小的问题，都可能导致整个应用服务直接挂掉。

# 二、微服务架构

微服务架构是一种架构概念，核心思想在于通过将业务功能和需求分解到各个不同的服务中进行管理，实现对业务整体解耦。围绕业务模式创建应用服务，应用服务可独立地进行开发、迭代、部署。使项目的架构更加清晰明确。

## **微服务优劣势**

1. 单个服务对应单个业务功能，方便理解，开发，维护;
2. 服务独立部署，可以根据每个服务的请求量来部署满足需求的规模;
3. 数据库，服务，架构，业务拆分等难度增大，对技术能力要求较高;

# 三、项目简介

微服务架构案例核心内容，基于SpringCloud框架几个核心组件，Eureka服务注册与发现组件，Feign声明式的WebService客户端组件，Zuul动态路由网关组件。进行多个数据管理，多个服务管理搭建，多个中间件集成，多业务拆分等模式，搭建SpringCloud微服务框架的综合应用案例。

## **核心模块**

1. 业务拆分架构设计
2. 多个中间件服务集成
3. 微服务下代码分块管理
4. 多个MySQL数据源管理

### 四、技术选型

## **1、核心框架组件**

1. 基础层框架：Spring5+，SpringBoot2+，SpringCloud2+
2. 持久层框架：mybatis，mybatis-plus
3. 开发组件：Druid，Log4j，FastJson，JodaTime，JavaMail
4. 中间件集成：RocketMQ，Redis，Quart，ElasticSearch
5. 数据存储：MySQL、Redis、ElasticSearch

## **2、代码分层结构**

![从理论-实战，手把手带你图解微服务架构流程设计！](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/05194e485814497782d1649883aae72a~tplv-k3u1fbpfcp-zoom-1.image)

# 五、项目架构

## **1、架构图解**

![从理论-实战，手把手带你图解微服务架构流程设计！](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/f1d6c00666b4442a8cd3ee15b4bc2f00~tplv-k3u1fbpfcp-zoom-1.image)

## **2、架构说明**

## 客户端接口服务

1. 用户端服务接口;
2. 管理端服务接口;
3. 数据入库服务接口;
4. 数据分析服务接口

## 通用服务接口

1. RocketMQ消息队列服务 ;
2. ElasticSearch搜索引擎服务 ;
3. Quart定时器服务 ;
4. Redis缓存服务 ;
5. 基础业务：Token认证服务 ;
6. 基础业务：MsgBox消息中心服务 ;

## [微服务](https://mp.weixin.qq.com/s/sKHy0OJx7pITFJ33QR7XAg)组件

1. 路由网关：Zuul组件;
2. 服务注册与发现：Eureka组件;
3. 服务间调用组件：Feign组件;

## 数据存储容器

MySQL、Redis、ElasticSearch