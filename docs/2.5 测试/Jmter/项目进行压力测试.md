[TOC]

# 1、压力测试简介
jmeter只是客户端并发工具，jmeter≠性能测试。
Fiddler可以将网络传输发送与接受的数据包进行截获、重发、编辑、转存等操作。也可以用来检测网络安全。

项目压测包含了web程序 + 数据库 + 缓存 +其他等指标，体现出了项目整体的性能。
性能瓶颈一般出现在数据库。

性能指标，一般是tps（每秒处理事务数，这里都是通过的事务）、art（平均响应时间）及并发数，加上服务器资料利用率的要求（cpu、内存、IO、网络等）、各个服务的资源情况。

测试数据分为基础环境数据和业务数据；
基础环境数据可以从功能测试的库导过来，改一些配置即可；
业务数据包含：存量数据+容量规划数据，比如一个查询接口，都是并发100用户，对应的表数据量是1万和100万，压测结果是不一样的；
数据量要参考生产环境，如果是新项目，除了空库压，最好也做一下存量数据压。

# 2、压力测试-运维
1. ApacheBench
创建多并发线程模拟多用户对URL访问进行压力测试
Apache中有个自带的，名为ab的程序，ab可以创建很多的并发访问线程，模拟多个访问者同时对某一URL地址进行访问。

2. TCPcopy、UDPcopy
直接对某一机器流量copy到另一机器进行压力测试
提到压力测试，可能大多数人首先想到的就是ApacheBench，但ab是模拟访问，模拟毕竟是模拟，然而线上会遇到的错误可能往往无法预知，其实国内已经有人开发了一款线上流量copy的工具，就是TCPcopy、UDPcopy，能够之间copy线上流量到测试环境，大大减少了上线前的风险。支持设置copy流量倍数放大、缩小，修改流量的客户端IP源地址。

3. TCPburn
类似ApacheBench
tcpburn是由网易自主研发的能够模拟千万级别并发用户的一个软件，目的是能够用较少的资源来模拟出大量并发用户，并且能够更加真实地进行压力测试， 以解决网络消息推送服务方面的压力测试的问题和传统压力测试的问题。

# 3、安全

1. PortSentry
对端口扫描的机器做防御策略
特点

- 给出虚假的路由信息，把所有的信息流都重定向到一个不存在的主机；
- 自动将对服务器进行端口扫描的主机加到TCP-Wrappers的/etc/hosts.deny文件中
- 利用Netfilter机制、包过滤程序，比如iptables和ipchain等，把所有非法数据包（来自对服务器进行端口扫描的主机）都过滤掉；
- 通过syslog()函数给出一个目志消息，甚至可以返回给扫描者一段警告信息。

2. fail2ban
对SSH密码暴力破解的机器做防御策略。
防御 SSH 服务器的暴力破解攻击，对安全性要求过高的服务器还是建议禁止密码登入，使用密钥或者密钥+密码验证。

3. Google Authenticator
可以将第二部验证设置为通过短信或语音电话接收验证码，同时也支持 Android、iPhone 或 BlackBerry 设备来生成验证码
一款开源的，可基于开放规则（如 HMAP/基于时间）生成一次性密码的软件。Google公司同时也支持插件式鉴别模块PAM，使其能和其他也适用PAM进行验证的工具（如OpenSSH）协同工作。

4. knockd
害怕服务器被入侵，但是奈何经常在不同的地方登入或者登入的IP经常变动？knock一下吧。在服务器端设置只有你知道的“暗语”来让服务器给你芝麻开门。
knockd可以让server监听特定的端口，如果client按指定的顺序及协议（TCP/UDP）访问server指定端口，则运行指定命令，于是我们就可以用它来做一些有趣的事，比如利用IPTABLES动态增加防火墙等等。
另外，knock client也可以用来模拟发包探测网络连通性。比如不确定本机到对端的某个端口是否可通，可以在远程用tcpdump监听对应端口，然后用knock客户端模拟发包。