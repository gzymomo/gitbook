- [srs流媒体服务器集群搭建](https://blog.chihiro.org.cn/archives/2019090802460970356)



单台服务器做直播，总归有单点风险，利用SRS的[Forward机制][1] + [Edge Server][2]设计，可以很容易搭建一个大规模的高可用集群，示意图如下

​              ![img](https://s2.ax1x.com/2019/06/11/Vg7quF.png)            

源站服务器集群：origin server cluster，可以借助forward机制，仅用少量的服务器，专用于处理推流请求。

边缘服务器集群：edge server cluster，可以用N台机器，从源站拉流，用于较大规模的实时播放。

源站前置负载均衡（硬件或软件负载均衡都行），上图中用haproxy来实现tcp的软负载均衡。

边缘服务器前置反向代理（比如：nginx），用于提供统一的播放地址，同时解决跨域问题，给客户端拉流播放。

这样架构的好处有以下：

- 不管是源站集群，还是连缘服务器集群，均可水平扩展，理论上没有上限。
- 源站可以仅用较少的机器，比如2主2从，就能实现一个高可用且性能尚可的集群（如果业务量不大，连slave server都可以省掉）
- 边缘服务器集群，可以根据实际用户量随时调整规模，另外hls切片，可以放在edge server上切片，减轻源站服务器压力。