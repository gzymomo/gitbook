- [一朵云、一张网、一体化 ——GRTN 打造最佳流媒体场景实践](https://www.cnblogs.com/VideoCloudTech/p/15330416.html)

> 阿里巴巴 GRTN 是面向流媒体云原生设计的，方便客户构建自己的流媒体云原生应用，让流媒体服务无处不在。

在近期召开的分布式云主题报告会上，阿里云资深技术专家卢日发表了题为《GRTN 打造阿里云边缘云最佳流媒体场景实践》的精彩演讲。

卢日分享了他对分布式云的见解，他表示，**Gartner 连续两年将分布式云列为全球 10 大最顶级技术趋势**，并预测到 2025 年超过 50% 的企业将会使用分布式云，分布式云代表了云计算的未来。

![img](https://img2020.cnblogs.com/other/2200703/202109/2200703-20210924145359563-1509144542.png)

分布式云可以分为本地公共云、城域区域云、5G 移动边缘云、IoT 边缘云、网络边缘云等，分别服务于不同的用户场景。分布式云目前已经处于创新驱动期，未来充满了挑战机遇和想象空间。

**阿里云提出的云 - 边 - 端协同体系，云 + 端形成一朵云，与分布式云的理念不谋而合。**

越来越多的生态应用依赖于云 - 边 - 端的协同，边缘云在体系之中扮演承上启下的角色：一方面，整合各种各样的边缘节点，建设无处不在的边缘覆盖；另一方面，基于自研的分布式操作系统，实现统一纳管、统一调度。

阿里巴巴**下一代流媒体网络 GRTN** 就是构建在云 - 边 - 端协同体系下典型分布式流媒体实践，卢日将其总结为九个字：**一朵云、一张网和一体化**。

**一朵云**，指阿里云 GRTN 构建在中心云原生和边缘云原生的基础设施之上，并将技术有机融合，借鉴 SDN 的设计理念，进行 CD 分离，将控制放在中心，将数据面分布下沉到阿里云边缘云 2800 多个节点之上。

**一张网**，具备场景化的 QOS 能力、400 毫秒以内的实时通讯能力和超低延时能力，GRTN 同时具备了全链路的 RTC 和动态组网能力，这些能力都是下一代流媒体传输网络的典型特征。

**一体化**，GRTN 提供了一体化解决方案，不仅支持视频上云，视频分发的流媒体特性，同时具备分布式计算、分布式存储处理能力。GRTN 可以为企业构建流媒体应用提供更加易用，更加专业的服务，阿里云将 **GRTN 打造成流媒体云原生 aPaaS 服务**，拥有更敏捷的计算、更实时的连接、更多元的资源、更精细的控制、更科学的评测等特征。

## 更敏捷的计算

**典型的流媒体全链路分为七个环节：采集、编码、发送、分发、接收、解码和渲染。**

在**传统架构**里面，为了构建企业的流媒体云端应用，开发者通常的做法是将自研流媒体处理程序和软件或系统部署到云中心、边缘计算的虚拟机或容器里，这在某种程度上不仅是资源浪费，还会付出额外的研发成本去针对虚拟机资源进行部署和调度。

![img](https://img2020.cnblogs.com/other/2200703/202109/2200703-20210924145400006-1053855343.png)

其实开发者真正需要的只是一个媒体处理软件的落地环境，而不是捆绑了操作系统、CPU、磁盘、网卡的通用设施。

因此阿里云倡导**流媒体云原生平台**针对重计算，为开发者提供 Serverless 服务，开发者可以将自研的媒体处理程序，卢日称其为 **Serverless 流媒体算子**，流媒体云原生平台可以按需对算子进行部署和调度。算子可以分为前处理算子和后处理算子，为媒体流进行前处理和后处理。

## 更实时的连接

**在七个环节当中，中间三个环节与传输和组网相关，这个子领域的核心指标主要有规模，比如是否支持千万级并发以及一些核心的 QoE 指标，如首屏、延时 、卡顿等。**

卢日表示，未来，低延时势必成为各行各业的标配能力。因此对流媒体网络组网方式会提出了更高要求。

一方面在建设上需要扩充更多的**节点资源**，另一方面，系统需要加强对各种**异构资源**的适配能力。在提供优质链路资源的同时兼顾系统的**稳定性和易维护性**。

阿里云倡导流媒体云原生平台采用 **Hybrid 混合组网**，未来能够实现**全场景的覆盖**，面向终端针对各种场景进行协议适配。

因此，流媒体云原生平台对流媒体协议的快速开发和上线有更高的要求，媒体流是流媒体云原生平台管理的基本单元，阿里云提供多种组网方式，兼容丰富的流媒体协议、追求低延时的同时，关注系统的其他指标。需要针对这些不同的场景和业务需求进行智能适配，构建一张多维的流媒体的编排系统。

## 更多元的资源

在云计算领域，多云模式已为很多企业普遍接受，多云是一大趋势，多云对于客户产生了很大价值。

当一家供应商出现故障的时候，可以快速切换到另外一家供应商，最大缩减业务的不可用时长。提升业务的稳定性是非常典型的多云价值，因此可以借鉴**多云思路**提升云服务本身的**稳定性**，阿里云流媒体云原生平台能够具备对更多元的资源托管和调度能力。

随着容器化的技术发展成熟，利用**容器化的技术**对业务进行分层和租户隔离，能尽量减少影响。虽然对软件的管理和运维部署上提出了新的挑战，但业务稳定性的提升是显而易见的。

业务的创新和产品迭代效率可以依赖于客户的情况进行灵活的控制，同时还可以提升系统的弹性能力，非常具有好的业务价值。

## 更精细的控制

传统的流媒体服务在开放、自主和便捷上其实有很多的局限性，导致的后果是，流媒体云厂商被管道化，创新能力低下；链路长，成本很高。

**流媒体云原生平台**能够提供对平台内部更精细的控制，包括**可编程、可观测、可扩展**，并且具备**低代码**的特性。

**内部需要构建多种控制器，又可以分为两大类，一种是重计算控制器，一种是轻计算控制器**。典型的轻计算控制器，可以让第三方客户用可编程的方式扩展自己的 QOS 算法；分布式 Serverless 视频算子分布平台可以归为重计算控制器，第三方也可以植入他算子。

除业务隔离，还需要进一步采用安全容器技术，进一步降低控制器的开放所带来的安全隐患。开放自主的策略可以刺激流媒体的创新，未来可以构建**算子商城**，将有价值的算子和算法在行业内进行传播。

## 更科学的评测

![img](https://img2020.cnblogs.com/other/2200703/202109/2200703-20210924145400442-366372256.png)

质量优化是流媒体提供商的重要工作之一，在质量优化过程中有一些比较常见的痛点，如过度依赖于调优工程师的经验，这种经验很难进行沉淀，并且试错成本很高。

阿里云流媒体云原生平台可以借助 A/B 测试的理念，构建一套更科学的、闭环的测试系统，以达到 QOE  的持续优化和迭代目的，可编程设计能够有效降低成本，通过数据来驱动和评测调优效果，快速逼近天花板。另外，数据平台还需要沙盘模拟能力，可以对调优进行先验的预测，减少线上的回归。

### GRTN 短延时直播 RTS 典型案例

GRTN 经过阿里多个团队的协同研发以及多种业务场景的打磨，目前阿里集团不少 APP 和网站已经上线了低延时直播能力，包括淘宝、钉钉、优酷、Lazada 等等。

值得一提的是，相对传统的直播用户体验，2020 年双十一**淘宝电商**直播延时降低了 **80%** 多，流畅度提升了 **30%** 多，**今年的双十一进一步压缩延时，提升流畅度和清晰度**。

![img](https://img2020.cnblogs.com/other/2200703/202109/2200703-20210924145400763-828684568.png)

在对外商业化上，GRTN 提供的域名数达到数千个，帮助客户提供直播的视听体验。比如某短视频平台上线 **GRTN RTS** 直播以后，直播的时延降低了 **70%** 多，并且视频的渲染卡顿降低了 **40%** 多。

最后，卢日表示，希望能够借助分布式云计算大好形势推动流媒体云服务**更加普惠**，在继续服务好互联网行业的同时，更好地赋能传统行业，在通用和便捷之间寻找平衡。

**阿里巴巴 GRTN 不仅是基于云原生的，更是面向流媒体云原生设计的**，致力于提供流媒体云原生的服务，方便我们的客户能够构建自己的流媒体云原生应用，让流媒体服务无处不在。阿里云将和各位同仁共同打造普惠的**流媒体云原生生态**，为用户提供更实时、更流畅以及更高清的视听体验。