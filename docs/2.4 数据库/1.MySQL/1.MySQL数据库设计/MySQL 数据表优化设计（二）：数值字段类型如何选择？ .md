[MySQL 数据表优化设计（二）：数值字段类型如何选择?](https://juejin.cn/post/6967490332158066696)

> 在MySQL 中有两种数值类型，整型和实数（即带有小数的数字）。整型可以通过 TINYINT、SMALLINT、MEDIUMINT、INT 或 BIGINT 表示，分别对应8bit、16bit、24bit、32bit 和64bit 的存储空间。实数可以通过 FLOAT、DOUBLE 和 DECIMAL 表示，其中 FLOAT 和 DOUBLE 即通常所说的浮点数，由于计算机二进制存储的精度问题，其计算得到的是近似的结果。

#### 整型字段类型设计

整型可以选择是否是无符号数，这样可以禁止使用负数，并且可以将存储的最大值翻倍，例如 TINYINT UNSIGNED类型的字段可以存储的值的范围是0-255，而不是有符号的-128-127。使用无符号还是有符号取决与字段类型的范围，但是如果确定字段是无符号的，那么优先选择无符号类型，因为最大值翻倍可以在一定程度上避免使用更大存储空间的整型类型。

MySQL 允许我们指定整型的宽度，例如 INT(11)。这对于大部分应用并没有太大意义——实际上 MySQL 并不会限制合法值的范围，也就是即便指定为 INT(11），实际上只要数值类型的存储空间足够，也可以存储超过设定宽度的整型，例如 INT(12)的数字也可能可以存储到 INT(11)类型的字段中。对于存储和计算而言，INT(1)和 INT(20)是等效的。

如果确实要考虑性能，应该是根据业务真实的数值范围来确定使用整型字段类型，原则是只要字段类型不会超过业务系统的数值最大值，那么尽可能地选择**低存储长度**的整型类型。如果是无符号的数值，那就尽量使用无符号属性。例如，假设使用整型替代枚举的话，如果枚举数量不超过255个，那就优先使用 UNSIGNED TINYINT 类型。

#### 实数

实数不仅仅可以用来存储浮点数，实际上还可以使用 DECIMAL 类型来存储超出 BIGINT 类型的数值。对于 浮点数，MySQL 支持精确浮点数类型和不精确浮点数。

FLOAT 和 DOUBLE 类型支持标准数学运算的近似运算，浮点数的实际计算结果的精确度依赖于实现浮点数的平台。DECIMAL 类型用于存储精确的浮点数，在 MySQL 5.0以后，DECIMAL 也支持精确的数学运算（更早的版本实际上是使用浮点数来进行 DECIMAL 运算的）。但是，由于 CPU 本身不能直接精确计算浮点数，因此 DECIMAL 数据类型的计算速度会比浮点数要慢。

浮点数和 DECIMAL 都支持指定精度。DECIMAL 类型的可以分别指定小数点前后最大的数字位数，这会影响数据列的存储空间占用。MySQL5.0版本以后将数字位以二进制形式存储（每9位数使用4个字节存储）。例如 DECIMAL(18, 9)将在小数点两侧均为9位数字，算上小数点（占一个字节），总共需要9个字节来存储。DECIMAL 最大的数字位数是65（包含小数位和整数位），例如下面的表表创建语句会报错提示`#1426 - Too-big precision 66 specified for 'number'. Maximum is 65.`：

```sql
CREATE TABLE t_numbers ( 
  id INT(11) AUTO_INCREMENT PRIMARY KEY, 
  number DECIMAL(66,1) 
);
复制代码
```

对于 FLOAT 和 DOUBLE类型，也可以类似 DECIMAL 那种方式指定整数位和小数位来确定存储范围和精度。不同的长度会使得 MySQL默认选择不同的数据类型并使用近似值存储数据。FLOAT 类型的存储长度固定为4个字节， DOUBLE 类型的存储长度固定为8个字节。精度是不确定的，指定精度对存储空间并没有帮助，因此从计算准确度考虑，建议是不要指定精度。在内部计算的时候，MySQL 会选择使用 DOUBLE类型计算 FLOAT 类型的数据。

由于 DECIMAL 占据的空间更大以及计算资源消耗也更大，因此建议只有在需要精确表示数值的情况下选择使用 DECIMAL（例如金融数据，如金额）。如果考虑计算性能，也可以考虑使用 BIGINT 来存储精确的浮点数，例如将金额统一乘以固定的倍数转换为 BIGINT 进行运算，这种方式的计算效率和存储空间都会更小。