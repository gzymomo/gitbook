## 性能优化有哪些方面？

![img](https://img-blog.csdnimg.cn/20201103003704366.jpg)

可以从数据聚合优化、资源冲突优化、算法优化、JVM优化、复用优化、计算优化和快速实现等方面来进行回答。

### 数据聚合优化

数据聚合优化主要针对的是对于数据的整合和传输的优化。比如：我们从数据库中查询出的数据，经过程序的聚合处理后再返回给客户端，而不用客户端调用多次接口来分别获取数据。

再比如：我们在项目中使用的Nginx，一般都会开启GZIP压缩，使传输的数据更加紧凑，同时，使传输的数据量更小。

细心的小伙伴会发现，我们对于数据聚合的优化，主要是使传输的数据量更小。所以，我们在使用SQL语句查询数据库中的数据时，尽量查询那些需要的字段，对于不需要的字段就直接忽略不查询了，避免在SQL语句中出现select *

### 资源冲突优化

在我们平时的工作中，尤其是在高并发的场景下，经常会出现锁冲突的问题，锁冲突是资源冲突的一个典型场景。

关于锁我们可以联想到数据库的行锁、表锁、Java中的synchronized和Lock等。如果对应到操作系统级别，则会有CPU命令级别的锁，JVM指令级别的锁，操作系统的内部锁等。

这里，小伙伴们需要注意一点：只有在并发的场景下，才会出现资源冲突的问题。也就是说：在同一时刻，只能有一个请求获取到请求资源，解决冲突的方式就是加锁。

我们需要在平时的工作过程中避免锁冲突的问题，优化如何优化加锁方式，小伙伴们可以参见《[【高并发】面试官：讲讲高并发场景下如何优化加锁方式？](https://mp.weixin.qq.com/s?__biz=Mzg3MzE1NTIzNA==&mid=2247488569&idx=1&sn=b9e1e60bee2166e3043695a9198b67d1&chksm=cee50bf4f99282e2eb7b69196eebf65d02260cdc151cd3aa7d639abb0afa9bcf30dd6e485939&token=537906095&lang=zh_CN#rd)》一文。

### 算法优化

在一个大型的互联网项目中，往往涉及到分布式和微服务等技术，其中，也会使用到大量的数据结构和算法，对于算法的优化能够显著的提高系统的性能。一个好的实现，相比于一个拙劣的实现来说，在系统性能的提升上存在着巨大的差异。

比如，作为 List 的实现，LinkedList 和 ArrayList 在随机访问的性能上，差了好几个数量级；又比如，CopyOnWriteList 采用写时复制的方式，可以显著降低读多写少场景下的锁冲突。而什么时候使用同步，什么时候是线程安全的，也对我们的编码能力有较高的要求。

所以，我们需要在平时工作过程中，多多积累数据结构和算法的相关知识。

### JVM优化

JVM调优，不用说，这是每个Java工程师必须要掌握的标准技能。所有的Java程序最终都是运行在JVM中的，对JVM进行优化也能够提升Java程序的性能。但是，需要注意的是：如果在优化JVM时，参数设置不当，可能会造成内存溢出等严重的问题。

目前被广泛使用的垃圾回收器是 G1，通过很少的参数配置，内存即可高效回收。CMS 垃圾回收器已经在 Java 14 中被移除，由于它的 GC 时间不可控，有条件应该尽量避免使用。

### 复用优化

复用优化，这个看名字就知道，说白了就是可以重复利用。估计很多小伙伴都有这样的经验，在写代码的时候，可以将很多重复的代码抽象出来，做成公共的方法。这样，就不用每次都去写重复的逻辑代码了。这是代码层面的复用。

如果是数据层面的话，我们可以使用缓冲和缓存来复用数据。

这里，小伙伴们需要注意一个知识点：缓冲主要针对的是写操作，缓存主要针对的是读操作。

另一个复用优化的典型场景就是池化技术，比如：数据库连接池、线程池等。

### 计算优化

对于计算优化来说，我们可以从以下几个小的方面来阐述。

**并行计算**

不难理解，就是多个计算同时进行。这里，又可以将并行计算分为：多机并行计算、多进程并行计算和多线程并行计算。

**多机并行计算：** 将一个大的计算任务，拆分成N个小的计算任务，分发到不同的机器进行处理。典型的场景就是Hadoop的MapReduce极端。

**多进程计算：** 比如，Nginx采用的NIO模型，采用的是进程调度的策略，由Master进程调度Worker进程，Worker进行来处理具体的请求。

**多线程计算**： 对于多线程计算来说，也是我们平时接触最多的一种计算方式，我们可以使用多线程技术，将复杂的逻辑计算拆分成一个个小的计算任务，分发到不同的线程中去执行。

**同步变异步**

同步和异步的区别就是：同步需要等待返回结果，异步不需要等待返回结果。如果我们在业务程序中，不需要等待返回结果数据，则我们可以将同步调用优化为异步调用，从而提升我们系统的性能。

**懒加载**

最典型的场景就是Spring中的懒加载，只有第一次获取bean的时候，才会创建bean实例。

### 快速实现

对于快速实现来说，不仅包含我们需要利用相关的程序框架迅速开发出我们想要的业务，也需要我们在进行技术选型时，尽量使用一些性能优良的组件。比如，在进行网络开发时，尽量选择Netty，结合轻量级的数据传输，就不要使用WebService等技术了。

很多公司喜欢使用适配器模式，在一些现有的开源组件之上，再抽象一层自己的组件，这样就能够做到切换底层组件的时候，对上层应用无感。